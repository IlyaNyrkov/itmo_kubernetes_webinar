# Вебинар по kubernetes для ИТМО

## Задание

*Рекомендуется выполнять в minikube или в vk cloud.*

Установить minikube можно по [инструкции](https://minikube.sigs.k8s.io/docs/start/).

Создать кластер в vk cloud можно по [инструкции](https://mcs.mail.ru/docs/ru/base/k8s/operations/create-cluster/create-webui).

В данном задании предлагается развернуть простое http-приложение в kubernetes, развернуть для него автомасштабирование и подать нагрузку для демонстрации работы.

*В папке example описан пример выполнения этого задания.*

### Часть 1

1) Установить minikube / создать кластер в vk cloud.

2) Запустить minikube / подключиться к кластеру в vk cloud.

3) Подготовить любое приложение с минимум одной http-ручкой, которую можно вызвать в рамках тестирования утилитами для отправки HTTP запросов вроде curl, wget, HTTPie, Postman.

4) Собрать docker-образ приложения и добавить в minikube / docker registry кластера в vk cloud.

5) Написать манифест для деплоймента приложения в кластер. В деплойменте должен быть описан репликасет с образом приложения, который был добавлен ранее.

6) Применяем написанный манифест на кластере.

7) Делаем port-forwarding на localhost для тестирования работы приложения.

8) Отправляем запрос на приложение в kubernetes одним из описанных выше приложений.

### Часть 2

1) Остановите, запущенное ранее, приложение или удалите deployment, созданный при помощи манифеста.

2) Настройте автоскейлинг подов по [инструкции](https://blog.devops.dev/guide-to-kubernetes-autoscaling-a7dcd14a894).

3) Запускаем приложение с новыми настройками.

4) Подаём нагрузку на приложение инструментом для нагрузочного тестирования: K6, JMeter, Gatling и др. Также можно воспользоваться простым bash-скриптом.

5) Демонстрируем работу автоскейлинга командой, в выводе которой должны появится новые поды:
```bash
kubectl get pods
```